(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-524c21d8"],{3315:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"personalData"},[e("van-nav-bar",{attrs:{title:"个人资料","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),e("div",{staticClass:"personal-box"},[e("van-cell",{attrs:{title:"头像"}},[e("div",{staticClass:"fr personal-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.myData.userImg,alt:""}}),e("van-uploader",{attrs:{"after-read":t.uploadUserImg}})],1)]),e("van-cell",{attrs:{title:"用户ID"}},[e("div",{staticClass:"fr"},[t._v(t._s(t.myData.userId))])]),e("van-cell",{attrs:{title:"用户名"}},[e("div",{staticClass:"fr"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.myData.nickName,expression:"myData.nickName"}],staticClass:"nickname",attrs:{type:"text"},domProps:{value:t.myData.nickName},on:{change:function(a){return t.modify("nickName","/updateNickName")},input:function(a){a.target.composing||t.$set(t.myData,"nickName",a.target.value)}}})])]),e("van-cell",{attrs:{title:"手机号"}},[e("div",{staticClass:"fr"},[t._v(t._s(t.myData.phone))])]),e("van-cell",{attrs:{title:"会员等级"}},[0==t.myData.vip?e("div",{staticClass:"fr"},[t._v("普通会员")]):t._e(),1==t.myData.vip?e("div",{staticClass:"fr"},[t._v("钻石会员")]):t._e()]),e("div",{staticClass:"desc-box"},[e("div",{staticClass:"desc-title"},[t._v("简介")]),e("div",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.myData.desc,expression:"myData.desc"}],staticClass:"text-area",attrs:{placeholder:"这家伙很懒，什么都没有留下"},domProps:{value:t.myData.desc},on:{change:function(a){return t.modify("desc","/updateDesc")},input:function(a){a.target.composing||t.$set(t.myData,"desc",a.target.value)}}})])])],1)],1)},s=[];e("c975"),e("a15b"),e("ac1f"),e("5319"),e("1276");function n(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}e("ed18");var o=e("2f14"),r={data:function(){return{myData:[],maxSize:512e3}},created:function(){this.getMyData()},methods:{back:function(){this.$router.go(-1)},getMyData:function(){var t=this,a=localStorage.getItem("WTPTK");a||(this.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),this.$router.push({name:"Login"})),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findAccountInfo",params:{appkey:this.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),"B001"==a.data.code&&(t.myData=a.data.result[0])})).catch((function(a){t.$toast.clear()}))},uploadUserImg:function(t){var a=this,e=localStorage.getItem("WTPTK");e||(this.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),this.$router.push({name:"Login"}));var i=t.file.type.split("/")[1],s=["jpg","png","gif","jpeg"];if(-1!=s.indexOf(i))if(this.maxSize<t.file.size)this.$toast("上传图片大小不能超过"+this.maxSize+"KB");else{var n=t.content.replace(/data:image\/[A-Za-z]+;base64,/,""),r={appkey:this.appkey,tokenString:e,imgType:i,serverBase64Img:n};r=o["a"].queryString(r),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/updateAvatar",data:r}).then((function(t){a.$toast.clear(),"H001"==t.data.code&&(a.myData.userImg=t.data.userImg),a.$toast(t.data.msg)})).catch((function(t){a.$toast.clear()}))}else this.$toast("仅支持"+s.join(","))},modify:function(t,a){var e=this,i=localStorage.getItem("WTPTK");i||(this.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),this.$router.push({name:"Login"}));var s=n({appkey:this.appkey,tokenString:i},t,this.myData[t]);s=o["a"].queryString(s),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:a,data:s}).then((function(t){e.$toast.clear(),e.$toast(t.data.msg)})).catch((function(t){e.$toast.clear()}))}}},c=r,l=e("2877"),d=Object(l["a"])(c,i,s,!1,null,"5da2dc59",null);a["default"]=d.exports},ed18:function(t,a,e){}}]);
//# sourceMappingURL=chunk-524c21d8.23542647.js.map