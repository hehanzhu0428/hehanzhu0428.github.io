(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f187a7e0"],{"0870":function(t,e,a){},"2f14":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("99af"),a("fb6a");var r=a("d4ec"),n=a("bee2"),i=function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,[{key:"queryString",value:function(t){var e="";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");return e.slice(0,-1)}}]),t}(),o=new i},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var o=r(e);o in t?n.f(t,o,i(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),i=a("e8b5"),o=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),f=a("b622"),v=a("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",m=v>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=d("concat"),y=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:i(t)},C=!m||!b;r({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,r,n,i,o=s(this),d=u(o,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?o:arguments[e],y(i)){if(n=c(i.length),f+n>h)throw TypeError(g);for(a=0;a<n;a++,f++)a in i&&l(d,f,i[a])}else{if(f>=h)throw TypeError(g);l(d,f++,i)}return d.length=f,d}})},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),o=a("50c4"),s=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),v=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,e){var a,r,u,d,f,v,b=s(this),y=o(b.length),C=n(t,y),k=arguments.length;if(0===k?a=r=0:1===k?(a=0,r=y-C):(a=k-2,r=h(p(i(e),0),y-C)),y+a-r>g)throw TypeError(m);for(u=c(b,r),d=0;d<r;d++)f=C+d,f in b&&l(u,d,b[f]);if(u.length=r,a<r){for(d=C;d<y-r;d++)f=d+r,v=d+a,f in b?b[v]=b[f]:delete b[v];for(d=y;d>y-r+a;d--)delete b[d-1]}else if(a>r)for(d=y-r;d>C;d--)f=d+r-1,v=d+a-1,f in b?b[v]=b[f]:delete b[v];for(d=0;d<a;d++)b[d+C]=arguments[d+2];return b.length=y-r+a,u}})},bee2:function(t,e,a){"use strict";function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}a.d(e,"a",(function(){return n}))},bf82:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.back},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}}),a("div",{staticClass:"order-box"},[a("van-tabs",{attrs:{"title-active-color":"#3585f9",color:"#3585f9"},on:{change:t.changeStatus},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.navItem,(function(e,r){return a("van-tab",{key:r,attrs:{title:e.title}},[t.orderData.length>0?a("div",t._l(t.orderData,(function(e,r){return a("div",{key:r,staticClass:"content"},[a("div",{staticClass:"clearfix content-title"},[a("h3",{staticClass:"fl"},[t._v(" 订单编号: "),a("span",{staticClass:"order-num"},[t._v(t._s(e.classifyDataId))])]),1==e.status?a("div",{staticClass:"fr sure",on:{click:function(a){return t.sureOrder(e,r)}}},[t._v("确认收货")]):a("div",{staticClass:"fr status"},[t._v(" 已完成 "),a("van-icon",{staticClass:"fr",attrs:{name:"delete"},on:{click:function(a){return t.deleteOrder(e.classifyDataId,r)}}})],1)]),a("div",{staticClass:"orderMessage"},[a("div",{staticClass:"orderInfo"},t._l(e.productData,(function(e,r){return a("div",{key:r,staticClass:"menu-box"},[a("div",{staticClass:"menu-list clearfix"},[a("div",{staticClass:"menu-img fl"},[a("img",{staticClass:"auto-img",attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"menu-content fl clearfix"},[a("div",{staticClass:"menu-name"},[t._v(" "+t._s(e.name)+" "),a("span",{staticClass:"spec"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"menu-enname"},[t._v(t._s(e.enname))]),a("div",{staticClass:"menu-count"},[t._v("x"+t._s(e.count))]),a("span",{staticClass:"menu-pri"},[t._v("￥"+t._s(e.price))])])])])})),0)]),a("div",{staticClass:"orderTotal"},[a("div",{staticClass:"orderTotal-bor clearfix"},[a("div",{staticClass:"order-time"},[t._v(t._s(t._f("formatDate")(e.date)))]),a("div",{staticClass:"proToltal fl"},[t._v("共计"+t._s(e.count)+"件商品")]),a("div",{staticClass:"toltal fr"},[t._v(" 合计 "),a("span",[t._v("￥"+t._s(e.total))])])]),a("div",{staticClass:"left-box left"}),a("div",{staticClass:"left-box right"})])])})),0):a("div",[a("van-empty",{attrs:{description:"全部"==e.title?"您还没有任何的订单":"您还没有任何"+e.title+"的订单"}},[a("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"default"},on:{click:t.goMenu}},[t._v("前往下单")])],1)],1)])})),1)],1)],1)},n=[],i=(a("d81d"),a("a434"),a("0870"),a("2f14")),o={data:function(){return{active:0,orderData:[],navItem:[{title:"全部"},{title:"进行中"},{title:"已完成"}]}},created:function(){var t=this;this.$nextTick((function(){t.getOrder(0)}))},methods:{back:function(){this.$router.go(-1)},getOrder:function(t){var e=this,a=localStorage.getItem("WTPTK");if(!a)return this.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.orderData=[],e.$toast.clear(),7e4==t.data.code){var a={};for(var r in t.data.result.map((function(t){a[t.oid]?(a[t.oid].count+=t.count,a[t.oid].total+=t.count*t.price,a[t.oid].productData.push(t)):a[t.oid]={classifyDataId:t.oid,date:t.createdAt,count:t.count,total:t.count*t.price,status:t.status,productData:[t]}})),a)e.orderData.push(a[r]);e.orderData.sort((function(t,e){return new Date(e.date).getTime()-new Date(t.date).getTime()}))}})).catch((function(t){e.$toast.clear()}))},goMenu:function(){this.$router.push({name:"Menu"})},changeStatus:function(t){this.getOrder(t)},sureOrder:function(t,e){var a=this,r=localStorage.getItem("WTPTK");r||(this.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),this.$router.push({name:"Login"})),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var n={appkey:this.appkey,tokenString:r,oid:t.classifyDataId};n=i["a"].queryString(n),this.axios({method:"POST",url:"/receive",data:n}).then((function(r){a.$toast.clear(),8e4==r.data.code&&(a.$toast(r.data.msg),1==a.active?a.orderData.splice(e,1):t.status=2)})).catch((function(t){a.$toast.clear()}))},deleteOrder:function(t,e){var a=this;this.$dialog.confirm({title:"删除订单",message:"是否删除此订单",confirmButtonColor:"#3585f9"}).then((function(){var r=localStorage.getItem("WTPTK");r||(a.$notify({message:"请先登录",color:"#fff",background:"#3585f9",duration:800}),a.$router.push({name:"Login"})),a.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var n={appkey:a.appkey,tokenString:r,oid:t};n=i["a"].queryString(n),a.axios({method:"POST",url:"/removeOrder",data:n}).then((function(t){a.$toast.clear(),9e4==t.data.code&&(a.$toast(t.data.msg),a.orderData.splice(e,1))})).catch((function(t){a.$toast.clear()}))})).catch((function(){}))}}},s=o,c=a("2877"),l=Object(c["a"])(s,r,n,!1,null,"75e9accf",null);e["default"]=l.exports},d4ec:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return r}))},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,i=a("1dde"),o=a("ae40"),s=i("map"),c=o("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,a){"use strict";var r=a("23e7"),n=a("861d"),i=a("e8b5"),o=a("23cb"),s=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("b622"),d=a("1dde"),f=a("ae40"),v=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=u("species"),g=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!v||!p},{slice:function(t,e){var a,r,u,d=c(this),f=s(d.length),v=o(t,f),p=o(void 0===e?f:e,f);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(d,v,p);for(r=new(void 0===a?Array:a)(m(p-v,0)),u=0;v<p;v++,u++)v in d&&l(r,u,d[v]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-f187a7e0.9260a413.js.map